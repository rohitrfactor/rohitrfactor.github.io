<html>
 <meta charset="UTF-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<body>
      <div style="display: block; opacity: 1; top: 345px; width: 685px; margin-top: 100px;margin:auto">
        <object id="keyboardHolder" data="keyboard-ansi.svg" type="image/svg+xml" style="width: 685px;">
      </object>
                <div style="margin: -264px 0px 0px -120px; position: relative; overflow: hidden; width: 886px; height: 460px; pointer-events: none;">
                        <img id="lhand" src="left-hand-both.png" style="margin: 0px 0px 0px 1635px; position: absolute; top: -2px; left: 140px; opacity: 0.4; transform: translate(-1772px, -920px);">
                        <img id="rhand" src="right-hand-both.png" style="margin: 0px 0px 0px -135px; position: absolute; top: -2px; left: 140px; opacity: 0.4; transform: translate(0px, 0px);">
                </div>
      </div>

</body>
<script>
window.onload = function(){
  var keyboardHolder = document.getElementById("keyboardHolder");
  // Get the SVG document inside the Object tag
  svgDoc = keyboardHolder.contentDocument;
  shiftLColor = svgDoc.getElementById('shift-left');
  shiftRColor = svgDoc.getElementById('shift-right');
  prev = svgDoc.getElementById('tilda');
var keyMap ={
      200: {
        "id":"capslock",
        "hand": "left",
        "margin":  "0px 0px 0px 745px"
      },
      650: {
      "id":"a",
      "hand": "left",
      "margin":  "0px 0px 0px -140px"
      },
      830: {
      "id":"s",
      "hand": "left",
      "margin": "0px 0px 0px -1025px"
      },
      680: {
      "id":"d",
      "hand": "left",
      "margin": "0px 0px 0px -1910px"
      },
      700:{
      "id":"f",
      "hand": "left",
      "margin":"0px 0px 0px -2795px"
      },
      710:{
      "id":"g",
      "hand": "left",
      "margin":"0px 0px 0px -3680px"
      },
      810:{
      "id":"q",
      "hand": "left",
      "margin":"460px 0px 0px 755px"
      },
      870:{
      "id":"w",
      "hand": "left",
      "margin":"460px 0px 0px -130px"
      },
      690:{
      "id":"e",
      "hand": "left",
      "margin":"460px 0px 0px -1015px"
      },
      820:{
      "id":"r",
      "hand": "left",
      "margin":"460px 0px 0px -1900px"
      },
      840:{
      "id":"t",
      "hand": "left",
      "margin":"465px 0px 0px -2795px"
      },
      900:{
      "id":"z",
      "hand": "left",
      "margin":"-460px 0px 0px 750px"
      },
      880:{
      "id":"x",
      "hand": "left",
      "margin":"-460px 0px 0px -135px"
      },
      670:{
      "id":"c",
      "hand": "left",
      "margin":"-460px 0px 0px -1025px"
      },
      860:{
      "id":"v",
      "hand": "left",
      "margin":"-460px 0px 0px -1910px"
      },
      660:{
      "id":"b",
      "hand": "left",
      "margin":"-460px 0px 0px -2795px"
      },
      161:{
      "id":"shift-left",
      "hand": "left",
      "margin":"-460px 0px 0px 1635px"
      },
      720:{
      "id":"h",
      "hand": "right",
      "margin":"-920px 0px 0px -130px"
      },
      740:{
      "id":"j",
      "hand": "right",
      "margin": "-920px 0px 0px -1020px"
      },
      750:{
      "id":"k",
      "hand": "right",
      "margin":"-920px 0px 0px -1905px"
      },
      760:{
      "id":"l",
      "hand": "right",
      "margin":"-920px 0px 0px -2790px"
      },
      1860:{
      "id":"semicolon",
      "hand": "right",
      "margin":"-920px 0px 0px -3675px"
      },
      2220:{
      "id":"quote",
      "hand": "right",
      "margin":"-920px 0px 0px -4565px"
      },
      130:{
      "id":"enter",
      "hand": "right",
      "margin":"-920px 0px 0px -5450px"
      },
      890:{
      "id":"y",
      "hand": "right",
      "margin":"-460px 0px 0px -130px"
      },
      850:{
      "id":"u",
      "hand": "right",
      "margin":"-460px 0px 0px -1020px"
      },
      730:{
      "id":"i",
      "hand": "right",
      "margin":"-460px 0px 0px -1905px"
      },
      790:{
      "id":"o",
      "hand": "right",
      "margin":"-460px 0px 0px -2790px"
      },
      800:{
      "id":"p",
      "hand": "right",
      "margin":"-460px 0px 0px -3675px"
      },
      2190:{
      "id":"open-bracket",
      "hand": "right",
      "margin":"-460px 0px 0px -4565px"
      },
      2210:{
      "id":"close-bracket",
      "hand": "right",
      "margin":"-460px 0px 0px -5450px"
      },
      2200:{
      "id":"backslash",
      "hand": "right",
      "margin":"-1840px 0px 0px -130px"
      },
      780:{
      "id":"n",
      "hand": "right",
      "margin":"-1380px 0px 0px -130px"
      },
      770:{
      "id":"m",
      "hand": "right",
      "margin":"-1380px 0px 0px -1020px"
      },
      1880:{
      "id":"comma",
      "hand": "right",
      "margin":"-1380px 0px 0px -1905px"
      },
      1900:{
      "id":"dot",
      "hand": "right",
      "margin":"-1380px 0px 0px -2790px"
      },
      1910:{
      "id":"slash",
      "hand": "right",
      "margin":"-1380px 0px 0px -3675px"
      },
      162:{
      "id":"shift-right",
      "hand": "right",
      "margin":"-1380px 0px 0px -4565px"
      },
      320:{
      "id":"space",
      "hand": "right",
      "margin":"-1380px 0px 0px -5450px"
      },
      90:{
      "id":"tab",
      "hand": "left",
      "margin":"460px 0px 0px 1640px"
      },
      490:{
      "id":"key-1",
      "hand": "left",
      "margin":"920px 0px 0px 755px"
      },
      500:{
      "id":"key-2",
      "hand": "left",
      "margin":"920px 0px 0px -130px"
      },
      510:{
      "id":"key-3",
      "hand": "left",
      "margin":"920px 0px 0px -1015px"
      },
      520:{
      "id":"key-4",
      "hand": "left",
      "margin":"920px 0px 0px -1900px"
      },
      530:{
      "id":"key-5",
      "hand": "left",
      "margin":"920px 0px 0px -2795px"
      },
      550:{
      "id":"key-7",
      "hand": "right",
      "margin":"0px 0px 0px -6335px"
      },
      560:{
      "id":"key-8",
      "hand": "right",
      "margin":"0px 0px 0px -5450px"
      },
      570:{
      "id":"key-9",
      "hand": "right",
      "margin":"0px 0px 0px -4565px"
      },
      480:{
      "id":"key-0",
      "hand": "right",
      "margin":"0px 0px 0px -3675px"
      },
      540:{
      "id":"key-6",
      "hand": "right",
      "margin":"-1380px 0px 0px -6335px"
      },
      1890:{
      "id":"minus",
      "hand": "right",
      "margin":"0px 0px 0px -2790px"
      },
      1870:{
      "id":"equal",
      "hand": "right",
      "margin":"0px 0px 0px -1905px"
      },
      1920:{
      "id":"tilda",
      "hand": "left",
      "margin":"920px 0px 0px 1635px"
      }
  };
var mapping = {
  97:{
    "code":"650",
    "shift":"no"
  },
  65:{
    "code":"650",
    "shift":"yes"
  },
  98:{
    "code":"660",
    "shift":"no"
  },
  66:{
    "code":"660",
    "shift":"yes"
  },
  99:{
    "code":"670",
    "shift":"no"
  },
  67:{
    "code":"670",
    "shift":"yes"
  },
  100:{
    "code":"680",
    "shift":"no"
  },
  68:{
    "code":"680",
    "shift":"yes"
  },
  101:{
    "code":"690",
    "shift":"no"
  },
  69:{
    "code":"690",
    "shift":"yes"
  },
  102:{
    "code":"700",
    "shift":"no"
  },
  70:{
    "code":"700",
    "shift":"yes"
  },
  103:{
    "code":"710",
    "shift":"no"
  },
  71:{
    "code":"710",
    "shift":"yes"
  },
  104:{
    "code":"720",
    "shift":"no"
  },
  72:{
    "code":"720",
    "shift":"yes"
  },
  105:{
    "code":"730",
    "shift":"no"
  },
  73:{
    "code":"730",
    "shift":"yes"
  },
  106:{
    "code":"740",
    "shift":"no"
  },
  74:{
    "code":"740",
    "shift":"yes"
  },
  107:{
    "code":"750",
    "shift":"no"
  },
  75:{
    "code":"750",
    "shift":"yes"
  },
  108:{
    "code":"760",
    "shift":"no"
  },
  76:{
    "code":"760",
    "shift":"yes"
  },
  109:{
    "code":"770",
    "shift":"no"
  },
  77:{
    "code":"770",
    "shift":"yes"
  },
  110:{
    "code":"780",
    "shift":"no"
  },
  78:{
    "code":"780",
    "shift":"yes"
  },
  111:{
    "code":"790",
    "shift":"no"
  },
  79:{
    "code":"790",
    "shift":"yes"
  },
  112:{
    "code":"800",
    "shift":"no"
  },
  80:{
    "code":"800",
    "shift":"yes"
  },
  113:{
    "code":"810",
    "shift":"no"
  },
  81:{
    "code":"810",
    "shift":"yes"
  },
  114:{
    "code":"820",
    "shift":"no"
  },
  82:{
    "code":"820",
    "shift":"yes"
  },
  115:{
    "code":"830",
    "shift":"no"
  },
  83:{
    "code":"830",
    "shift":"yes"
  },
  116:{
    "code":"840",
    "shift":"no"
  },
  84:{
    "code":"840",
    "shift":"yes"
  },
  117:{
    "code":"850",
    "shift":"no"
  },
  85:{
    "code":"850",
    "shift":"yes"
  },
  118:{
    "code":"860",
    "shift":"no"
  },
  86:{
    "code":"860",
    "shift":"yes"
  },
  119:{
    "code":"870",
    "shift":"no"
  },
  87:{
    "code":"870",
    "shift":"yes"
  },
  120:{
    "code":"880",
    "shift":"no"
  },
  88:{
    "code":"880",
    "shift":"yes"
  },
  121:{
    "code":"890",
    "shift":"no"
  },
  89:{
    "code":"890",
    "shift":"yes"
  },
  122:{
    "code":"900",
    "shift":"no"
  },
  90:{
    "code":"900",
    "shift":"yes"
  },
  48:{
    "code":"480",
    "shift":"no"
  },
  49:{
    "code":"490",
    "shift":"no"
  },
  50:{
    "code":"500",
    "shift":"no"
  },
  51:{
    "code":"510",
    "shift":"no"
  },
  52:{
    "code":"520",
    "shift":"no"
  },
  53:{
    "code":"530",
    "shift":"no"
  },
  54:{
    "code":"540",
    "shift":"no"
  },
  55:{
    "code":"550",
    "shift":"no"
  },
  56:{
    "code":"560",
    "shift":"no"
  },
  57:{
    "code":"570",
    "shift":"no"
  }
};
var Hands = {
Lhandreset : function(){
  var lhand = document.getElementById('lhand');
  prev.style.fill = 'white';
  lhand.style.margin = "0px 0px 0px 1635px";
  shiftLColor.style.fill = 'white';
},
Rhandreset : function(){
  var rhand = document.getElementById('rhand');
  prev.style.fill = 'white';
  rhand.style.margin = "0px 0px 0px -135px";
  shiftRColor.style.fill = 'white';
},
moveLhand : function(x){
  var lhand = document.getElementById('lhand');
  lhand.style.margin = x;
},
moveRhand : function(x){
  var lhand = document.getElementById('rhand');
  lhand.style.margin = x;
},
RhandShift : function(){
  var rhand = document.getElementById('rhand');
  rhand.style.margin = "-1380px 0px 0px -4565px";
  shiftRColor.style.fill = '#79bbff';
},
LhandShift : function(){
  var rhand = document.getElementById('lhand');
  lhand.style.margin = "-460px 0px 0px 1635px";
  shiftLColor.style.fill = '#79bbff';
}
};
recommend = function(x){
            console.log("keycode "+x.charCodeAt(0));
            Hands.Rhandreset();
            Hands.Lhandreset();
            console.log(mapping[65].code);
            if(keyMap[mapping[x.charCodeAt(0)].code].hand == "left"){
                if(mapping[x.charCodeAt(0)].shift == "yes"){
                    Hands.RhandShift();
                }
                Hands.moveLhand(keyMap[mapping[x.charCodeAt(0)].code].margin);
                svgDoc.getElementById(keyMap[mapping[x.charCodeAt(0)].code].id).style.fill = '#79bbff';
                prev = svgDoc.getElementById(keyMap[mapping[x.charCodeAt(0)].code].id);
            }
            if(keyMap[mapping[x.charCodeAt(0)].code].hand == "right"){
              if(mapping[x.charCodeAt(0)].shift == "yes"){
                  Hands.LhandShift();
              }
                Hands.moveRhand(keyMap[mapping[x.charCodeAt(0)].code].margin);
                svgDoc.getElementById(keyMap[mapping[x.charCodeAt(0)].code].id).style.fill = '#79bbff';
                prev = svgDoc.getElementById(keyMap[mapping[x.charCodeAt(0)].code].id);
            }
};

var keyboardHolder = document.getElementById("keyboardHolder");
// Get the SVG document inside the Object tag
svgDoc = keyboardHolder.contentDocument;
prev = svgDoc.getElementById('tilda');

  document.addEventListener('keydown', function(e) {
      console.log('You just pressed a key '+e.keyCode+' location'+e.location+' code '+e.which||e.keyCode);
      Hands.Rhandreset();
      Hands.Lhandreset();
      prev.style.fill = 'white';
      var x = e.keyCode*10+e.location;
      console.log(x + ' value ');
      if(keyMap[x].hand == "left"){
          Hands.moveLhand(keyMap[x].margin);
          svgDoc.getElementById(keyMap[x].id).style.fill = '#79bbff';
          prev = svgDoc.getElementById(keyMap[x].id);
      }
      if(keyMap[x].hand == "right"){
          Hands.moveRhand(keyMap[x].margin);
          svgDoc.getElementById(keyMap[x].id).style.fill = '#79bbff';
          prev = svgDoc.getElementById(keyMap[x].id);
      }
 });
};




</script>
</html>
